---
- name: read yml
  shell: 'cat /etc/unbound/conf.d/00-cluster.conf | grep \.local-data-ptr | sed "s/\"/ /g" | cut -d ":" -f2- | cut -d " " -f 4'
  register: local_hosts
  become: yes
  become_user: root

- name: get all_hosts
  set_fact:
    all_hosts: "{{ local_hosts.stdout_lines | list }}"

- name: Invoke wire encryption for hbase
  include_role:
    name: certs
  vars:
    component_prefix: hbase
  become: yes
  become_user: root

- name: Invoke wire encryption for ranger plugins
  include_role:
    name: certs
  vars:
    component_prefix: ranger-plugin
    certs_local_alias: "rangerHbaseAgent"
    certs_jks_file: ranger-plugin.jks
    certs_jks_req: ranger-plugin.req
    certs_jks_cert: ranger-plugin.crt
  become: yes
  become_user: root
  when: install_ranger == true